<!DOCTYPE html>
<html>
  <head>
    <title><%= yield :title %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <%= javascript_importmap_tags %>
  </head>

  <body>
    <main class="container"><br />
      <div class="float-start">
        <h2 class="nav-float">
          <%= link_to root_url, title: "Go home" do %>
            <%= image_tag "https://mai-universe.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8e4f1353-986d-4bd2-bf9f-3af9ca66502c%2FGroup_1_16.svg?table=block&id=e55bc607-6d87-4f5c-a151-25019e233d7c&spaceId=ee0afcd0-179b-4a92-ad82-aa60c4dc6568&userId=&cache=v2", class: "img-fluid logo float-start" %>
          <% end %>
          QiDao Liquidity Matrix
        </h2>
      </div>
      <div class="float-end">
        <% if current_page?(root_url) %>
          <%= link_to tokens_path(format: :xlsx), title: "Export data to spreadsheet", class: "btn-nav" do %><ion-icon name="cloud-download-outline"></ion-icon><% end %>
          <% if user_signed_in? %>
            <% if current_user.admin? %>
            <span class="dropdown">
              <a class="btn-nav dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <ion-icon name="chevron-down-outline"></ion-icon>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Add new token", new_token_path, title: "Add new token", class: "dropdown-item" %></li>
                <li><%= link_to "Add new chain", new_network_path, title: "Add new chain", class: "dropdown-item" %></li>
              </ul>
            </span>
            <% end %>
            <%= link_to "Sign out", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn-nav" %>
          <% else %>
            <a href="https://github.com/spicy-muaddib/qidao_liquidity_matrix" target="_blank" title="Github" class="btn-nav"><ion-icon name="logo-github"></ion-icon></a>
          <% end %>
        <% else %>
          <%= link_to root_url, class: "btn-nav", title: "Go home" do %><ion-icon name="home-outline"></ion-icon><% end %>
          <% if user_signed_in? %>
            <% if current_user.admin? %>
              <% if controller.controller_name == "networks" && controller.action_name == "show" %>
                <span class="dropdown">
                  <a class="btn-nav dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <ion-icon name="chevron-down-outline"></ion-icon>
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <%= link_to edit_network_path(@network), title: "Edit this chain", class: "dropdown-item" do %>
                        Edit this chain
                      <% end %>
                    </li>
                    <li>
                      <%= link_to @network, method: :delete, title: "Delete this chain", class: "dropdown-item" do %>
                        Delete this chain
                      <% end %>
                    </li>
                  </ul>
                </span>
              <% end %>
              <% if controller.controller_name == "tokens" && controller.action_name == "show" %>
                <span class="dropdown">
                  <a class="btn-nav dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <ion-icon name="chevron-down-outline"></ion-icon>
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <%= link_to edit_token_path(@token), title: "Edit this token", class: "dropdown-item" do %>
                        Edit this token
                      <% end %>
                    </li>
                    <li>
                      <%= link_to @token, method: :delete, title: "Delete this token", class: "dropdown-item" do %>
                        Delete this token
                      <% end %>
                    </li>
                  </ul>
                </span>
              <% end %>
            <% end %>
            <%= link_to "Sign out", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn-nav" %>
          <% else %>
            <a href="https://github.com/spicy-muaddib/qidao_liquidity_matrix" target="_blank" title="Github" class="btn-nav"><ion-icon name="logo-github"></ion-icon></a>
          <% end %>
        <% end %>
      </div>
      <%= yield %>
    </main>
  </body>
</html>
