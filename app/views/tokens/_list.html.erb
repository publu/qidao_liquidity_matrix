<div id="tokens">
  <table class="table table-striped">
    <%= link_to 'Export Data', tokens_path(format: :xlsx), title: "Export data to spreadsheet", class: "btn-header float-end" %>
    <tr class="table-header">
      <th class="red">Token</th>
      <th class="red">Chain</th>
      <th class="red text-end">
        <%= sort_link(column: "liquidity", label: "Total Onchain Liquidity") %>
        <%= sort_indicator if params[:column] == "liquidity" %>
      </th>
      <th width="15%" class="red text-end">
        <%= sort_link(column: "trade_slippage", label: "Largest trade for stable with < 10% slippage") %>
        <%= sort_indicator if params[:column] == "trade_slippage" %>
      </th>
      <th class="red text-end">
        <%= sort_link(column: "volume", label: "1M Average Daily Volume") %>
        <%= sort_indicator if params[:column] == "volume" %>
      </th>
      <th width="15%" class="red text-end">Does one wallet own more than 20% of tokens in onchain LPs? (Y/N)</th>
      <th class="red text-center"><%= link_to tokens_path do %>Risk Grading<% end %></th>
      <th class="red text-end">Last updated</th>
    </tr>
    <% @tokens.each do |token| %>
    <tr>
      <td>
        <strong><%= token.symbol %></strong>
      </td>
      <td style="color: <%= token.network.color %>">
        <%= link_to token.network.name, token.network, title: "View chain information for " + token.network.name, class: "plain_link" %>
      </td>
      <td class="text-end">
        <%= number_to_currency(token.liquidity) %>
      </td>
      <td class="text-end">
        <%= number_to_currency(token.trade_slippage) %>
      </td>
      <td class="text-end">
        <%= number_to_currency(token.volume) %>
      </td>
      <td class="text-center">
        <% if token.centralized? %>
          <span class="text-danger">Yes</span>
        <% else %>
          No
        <% end %>
      </td>
      <td class="text-center">
        <%= link_to token, title: "View rubric for " + token.symbol + " on " + token.network.name do %><strong><%= token.grade %><% end %>
      </td>
      <td class="text-end">
        <%= token.updated_at.strftime("%d %B, %Y") %>
      </td>
    </tr>
  <% end %>
  </table>
</div>
